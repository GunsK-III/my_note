# 可变类型与不可变类型

>先来了解一下，在 Python 中，每个对象都有两个基本属性：**身份 (Identity)、值 (Value)**。<br>
>* 身份：可以理解为对象在内存中的唯一地址。通过内置函数 id() 可以查看它。<br>
>* 值：对象所包含的数据本身。
>
>**可变与不可变的区别，就在于这个对象的“值”能否被“原地”修改。**

### 1. 不可变类型变量
1. 对象一旦被创建，值就不能被改变。如果试图修改，需要创建一个新的对象，然后让再引用这个新对象。
2. 不可变变量类型有：**`number`、`str`、`tuple`、`frozenset`（不可变集合）**、`bytes`（二进制数据）。

```python
# 尝试修改元组？会报错！
my_tuple = (1, 2, 3)
my_tuple[0] = 100     # >> TypeError: 'tuple' object does not support item assignment.
```

### 2. 可变类型变量
1. 对象的值可以在原地被修改，而无需创建一个新的对象。对象的身份（ID）在修改前后保持不变。
2. 可变变量类型有：`list`、`dict`、`set`、`bytearray`（可变二进制数据）。
3. 修改方式 

```python
# 修改元素
my_list = [1, 2, 3]
my_list[0] = 100        # 修改

# 添加元素
my_list.append(4)       # 追加
my_list.extend([5, 6])  # 扩展

# 删除元素
my_list = [1, 2, 3, 4, 5]
del my_list[2]          # 删除索引为2的元素
my_list.remove(4)       # 删除值为4的元素
popped = my_list.pop()  # 删除并返回最后一个元素
```   
5. 变量赋值与别名
```python
list_a = [1, 2, 3]
list_b = list_a         # 它们不是两个独立的列表，而是同一个列表的两个名字
list_b.append(4)

print(list_a)           # >> [1, 2, 3, 4]
print(list_b)           # >> [1, 2, 3, 4]
print(list_a is list_b) # True, 它们是同一个对象

# 如果希望修改一个列表不影响另一个，可以使用
list_b = list_a.copy()  # 或 list_b = list_a[:]
```

### 3. 哈希性
1. 哈希性（hashable）是对象能否作为字典的键或加入集合的前提条件。
2. 可哈希：不可变的变量 `number, str, tuple, frozenset` 是**可哈希**的，可以作为hash()函数的输入。
3. 不可哈希：可变的变量 `list, dict, set` 是**不可哈希**，不能作为hash()函数的输入。
4. 集合是基于哈希表实现的，所以要求集合中所有元素都必须可哈希，也就是不可变。（`list, dict, set`都不可作为集合的元素）

```python
set1: set = {1, 2, [3, 4]}      # >> TypeError: unhashable type: 'list'
set2: set = {1, 2, {"a":1}}     # >> TypeError: unhashable type: 'dict'
set3: set = {1, 2, {3, 4}}      # >> TypeError: unhashable type: 'set'
```


### 4. 特殊情况
1. 元组本身是不可变的，但如果它包含了可变元素（如列表），这些可变元素自身仍然可以被修改。
```python
my_tuple = (1, 2, [3, 4])
# 尝试修改元组？会报错！
# my_tuple[0] = 100     # >> TypeError: 'tuple' object does not support item assignment
my_tuple[2].append(5)   # 但是，可以修改元组中的列表！
```
### 5. 数据类型
* 我们常提到的数据类型一般指Python内置数据类型（常规类型）
  * 序列类型：`str`, `list`, `tuple`
  * 集合类型：`set`, `frozenset`
  * 映射类型：`dict`
  * 数学类型：`int`, `float`, `complex`，`bool`
* 此外还有第三方库扩展数据类型
  * NumPy数组：`numpy.ndarray`
  * Pandas数据结构：`pandas.DataFrame`, `pandas.Series`
  * 张量：`torch.Tensor`，`tensorflow.Tensor`

